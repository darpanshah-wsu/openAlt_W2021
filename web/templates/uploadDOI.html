<!-- Salsabil's code from line 3 - 51 -->

{% extends 'bulkSearchTemplate.html' %}

<!-- Anything you put here will be in the HTML head tags-->
{% block head %}
<script class="jsbin" src="https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script src="../static/js/upload.js"></script>

<!-- Author: Salsabil Bakth -->
<!-- Function to check to file size and whether it is larger than 1MB -->
<!-- Beginning of code -->
<script>
  $(function () {
    let $uploadButton = $("#uploadButton");

    $uploadButton.click(function () {
      var size = $("#fileUpload")[0].files[0].size;

      // Check the size to see it in MB
      size = size / 1048576;

      // If size is greater than 1 MB
      if (size > 1) {
        alert("File size exceeds 1 MB! Please upload a file that is less than 1 MB.")
        location.reload();
        return false;
      }

      return (true)
    });

  });
</script>
<!-- End of code -->

<!-- Author: Salsabil Bakth -->
<!-- Function to check only csv files are being uploaded -->
<!-- Beginning of code -->
<script>
  $(function () {
    let $uploadButton = $("#uploadButton");

    $uploadButton.click(function () {
      let $fileName = $("#fileUpload");

      // Only file extension allowed
      var fileExtension = ['csv'];

      // If file does not have the correct file extension, reload page
      if ($.inArray($fileName.val().split('.').pop().toLowerCase(), fileExtension) == -1) {
        alert("File must be a CSV file! Please upload a CSV file.");
        location.reload();
        return false;
      }

      return (true);
    });

  });
</script>
<!-- End of code -->

{% endblock %}

<!-- Anything you put here will be in the body-->
{% block body %}

<body style="background-image: url('../static/images/library.jpg'); background-repeat: no-repeat; background-size:cover;">

  <div class="center-screen">
    
    <div class="center-screen">
      <div style="width:750px; border-radius: 25px; padding: 15px; background-color: rgba(60, 65, 70, 0.8); ">
        <h1 style="text-align: center; color: aliceblue;"><b>Upload List of DOIs</b></h1>
        <form action="{{ url_for('uploadDOI') }}" method="POST" enctype="multipart/form-data">
          <div style="color:black;" class="image-upload-wrap">
            <input class="file-upload-input" id="fileUpload" name="csv/json" type='file' onchange="readURL(this);"
              accept=".csv" />
            <div class="drag-text">
              <h3 style="color:aliceblue;">Drag and drop a file or Select Box</h3>
            </div>
          </div>

          <div class="file-upload-content">
            <div class="image-title-wrap">
              <!-- Display message after clicking submit -->
              <button type="submit" id="uploadButton" style="width: 350px;" input onchange="uploadMessage()" class="file-upload-btn"
                type="file">Upload File</button>
            </div>
          </div>
        </form>
      </div>

      <br>

      <div class="center-screen;">
        <div style="width: 750px; border-radius: 25px; padding: 0px; background-color: rgba(60, 65, 70, 0.8); "
          class="center-screen">
          <h3 style="text-align: center; color: aliceblue;"><b>Instructions</b></h3>
          <p1 style="text-align:left; color: aliceblue;">
            <ol>
              <li>Create a CSV file with a Microsoft Excel or a text editor such as Notepad++.</li>
              <li style="padding-top: 5px;">Enter your list of DOIs in the <em>first</em> column and save the
                file. </li>
              <div style="text-align: center;"><img src="../static/images/doiTemplate.jpg" style="padding: 10px;"></div>
              <li style="padding-top: 5px;">Click the box above and select your file. You may also drag the file directly
                into the box.</li>
            </ol>
          </p1>
          <br>
        </div>
      </div>


      

    </div>

  </div>


</body>

{% endblock %}