{% extends 'template.html' %}

<!-- Anything you put here will be in the HTML head tags-->
{% block head %}
<!-- FOR CHART -->
<!-- Load c3.css first -->
<link href="../static/js/libraries/c3-0.7.20/c3.css" rel="stylesheet">

<!-- Load d3 second -->
<script src="../static/js/libraries/d3.v5.min.js"></script>

<!-- Load c3 last (because it depends on d3) -->
<script src="../static/js/libraries/c3-0.7.20/c3.min.js"></script>
<!-- END CHART SECTION -->
{% endblock %}

<!-- Anything you put here will be in the body-->
{% block body %}

<script>
    //
</script>

<div class = "container">
    <div class="row">
        <!-- This is the left column-->
        <div class = "col-md-5">
            <div class="col">
                <table id="noBorders">
                    <tr>
                    <td class='item-data'>
                    <div class="AD_articleTitle">
                        {{ article_detail.articleTitle }}
                    </div>
                    <br>
                    <div class="AD_journalName">
                        Journal Name: {{ article_detail.journalName }}
                    </div>
                    <div class="AD_articleDate">
                        Article Date: {{ article_detail.articleDate }}
                    </div>
                    <div class="AD_authors">
                        Author(s):
                        {% for author in article_detail.author_list%}
                            {% if author == article_detail.author_list[-1]: %}
                              {{ author.name }}
                            {%else:%}
                              {{ author.name }} ,
                            {% endif %}
                        {% endfor %}
                    </div>
                    <div class="AD_DOI">article_detail.author_listarticle_detail.author_list
                        URL: <a href="https://doi.org/{{ article_detail.objectID }}"target="_blank">{{ article_detail.objectID }} &#8599;</a>
                    </div>
                    <br>
                    <br>
                    <br>
                    </td>
                    </tr>
                </table>
            </div> 
        </div><!-- End 5 width column on the left -->

        <!-- This is the right column, first row containing the chart -->
        <br><br>
        <div class="col-7">
            <h3 style="text-align: center;">Events for this article over time</h3>
            <div id="chart"></div>

        </div>
    </div> <!-- end of row -->
    <div class="row"> 
        <div class="col-md-5" id="eventsDisplay">
            <!-- <h1>Most Recent 100 events</h1> -->
            <h1>Events</h1>
            <hr>
            <table class="table table-bordered">
                {% for e in events %}
                <tr class="row row-bordered">
                    <td class="articleEventData">
                        {{e.sourceID}}  {{e.relationType}}
                        <br>
                        {{e.subjectID}}
                        <br>
                        <!-- Testing Purposes Article URL: {{ article_detail.objectID }} -->
                        <!-- Testing Purposes
                            <br>
                        DOI of Event: {{e.objectID}} -->
                    </td>
                </tr>
                {% endfor %}
            </table>
        </div>
        <!-- <div class="col-md-5" id="yearFilter">
            <h3>Year</h3>
            <hr>
            <form action="">
                <label for="2020">
                    <input type="checkbox" id="2020" name="2020"> 2020
                </label><br>
                <label for="2019">
                    <input type="checkbox" id="2019" name="2019"> 2019
                </label><br>
                <label for="2018">
                    <input type="checkbox" id="2018" name="2018"> 2018
                </label><br>
                <label for="2017">
                    <input type="checkbox" id="2017" name="2017"> 2016
                </label><br>
            </form>
        </div>
        -->
    </div> <!-- End the row -->
</div> <!-- end container wrapping entire page-->
<br>
<br>
<br>

<!-- Initialize the arrays as empty arrays -->
<script>
    cambiaevent=[]
    crossrefevent = [];
    dataciteevent = [];
    hypothesisevent = [];
    newsfeedevent = [];
    redditevent = [];
    redditlinksevent = [];
    stackexchangeevent = [];
    twitterevent = [];
    webevent = [];
    wikipediaevent = [];
    wordpressevent = [];
</script>


{% for index in cambiaEventData %}   
<script>
    cambiaevent.push("{{ index }}");
</script>
{% endfor %}


{% for index in crossrefEventData %}
<script>
    crossrefevent.push("{{ index }}");
</script>
{% endfor %}

{% for index in dataciteEventData %}
<script>
    dataciteevent.push("{{ index }}");
</script>
{% endfor %}

{% for index in hypothesisEventData %}
<script>
    hypothesisevent.push("{{ index }}");
</script>
{% endfor %}

{% for index in newsfeedEventData %}
<script>
    newsfeedevent.push("{{ index }}");
</script>
{% endfor %}

{% for index in redditEventData %}
<script>
    redditevent.push("{{ index }}");
</script>
{% endfor %}

{% for index in redditlinksEventData %}
<script>
    redditlinksevent.push("{{ index }}");
</script>
{% endfor %}

{% for index in stackexchangeEventData %}
<script>
    stackexchangeevent.push("{{ index }}");
</script>
{% endfor %}

{% for index in twitterEventData %}
<script>
    twitterevent.push("{{ index }}");
</script>
{% endfor %}

{% for index in webEventData %}
<script>
    webevent.push("{{ index }}");
</script>
{% endfor %}

{% for index in wikipediaEventData %}
<script>
    wikipediaevent.push("{{ index }}");
</script>
{% endfor %}

{% for index in wordpressEventData %}
<script>
    wordpressevent.push("{{ index }}");
</script>
{% endfor %}

<script src="../static/js/chartScript.js"></script>
{% endblock %}
